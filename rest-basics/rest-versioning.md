---
layout: default
title: Code versioning
parent: REST Basics
nav_order: 12
---

## Code versioning
{: .no_toc }

### Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

The REST versioning system will allow to stamp the data generated with REST and it will allow to identify new features or major changes to the code.

The stamped version number in the file might serve as a solution to reproduce or recover previous results which may show discrepancies with future versions. The version number shall be provided together with published or internal results. If we have access to a particular data file we will always be able to identify the official version of the code used to generate those results.

The version number of an official REST code release is built using 3 digits (2.X.Y, being X and Y the major and minor revision numbers) that identify major or measurable steps on the evolution of the code. This number is registered at any metadata class written to disk. It must be noticed that a REST data file processed at different stages may contain objects with different version numbers, if processed with different REST versions on different stages. The [TRestRun](https://sultan.unizar.es/rest/classTRestRun.html) object available inside the data file will always be stamped with the code version of the REST release used in the last processing.

Further details on the versioning strategy of REST will be found at our [contribution guide](https://github.com/rest-for-physics/framework/blob/master/CONTRIBUTING.md). A step by step guide to generate a new REST official release will be found [here](../rest-advanced/new-release.md).

## Downloading a particular official (and non-official) release

The versioning system of REST is strongly connected with the *git* versioning system. A new official REST release is generated by creating a new `git tag` at the [main framework repository](https://github.com/rest-for-physics/framework).

The following steps will clone (download) the repository to your local system, and place the code at the version chosen:

```
git clone https://github.com/rest-for-physics/framework.git rest-framework
cd rest-framework
git checkout tags/v2.3.9 -b official
```

The `git commit` id used to generate the data will also be stamped together with the version release number. Therefore, even if the data was generated with an un-official development release, we will be able to retrieve the exact code version used to generate or process the data file by downloading a specific commit id.

```
git clone https://github.com/rest-for-physics/framework.git rest-framework
cd rest-framework
git checkout f8b87f1
```

## Internal class versioning. ROOT Schema evolution.

Since version 2.2.1, REST is properly implementing automatic schema evolution feature of ROOT. In brief, when class members at a REST class are modified, the class version number should be updated manually at the `ClassDefOverride` call at the class header, where the version number of the class is defined. For example, the following line inside [TRestAxionMagneticField](https://sultan.unizar.es/rest/classTRestAxionMagneticField.html) defines the class version 3 for that specific class.

```
ClassDefOverride(TRestAxionMagneticField, 3);
```

When modifying the data members of the class the developer should increase the version number given at this call. That action will help ROOT to read previous versions of the class written to disk, and it will **guarantee backwards compatibility**.

